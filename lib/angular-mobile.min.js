function angular_mobile(){window.scope={},window.scope.elements=[],window.scope.events=[];var repeat={};this._is_array=function(a){return"object"==typeof a&&null!=a&&void 0!=a&&"function"==typeof a.push?!0:!1},this._get_value=function(attr,e,isrepeat){var result,exp;if(isrepeat){var exps=attr.split("."),length=exps.length,repeatKey=exps.join(""),index=repeat[repeatKey];void 0==index?(repeat[repeatKey]=0,index=0):(repeat[repeatKey]=repeat[repeatKey]+1,index+=1),exp="window.scope";for(var i=0;i<exps.length;i++){if(i<exps.length-2){exp+="."+exps[i]}else{if(i==exps.length-2){if(exp+="."+exps[i],eval("result="+exp),!this._is_array(result)){exp+="."+exps[i+1];break}}else{i==exps.length-1&&(exp+="["+index+"]."+exps[i])}}}eval("result="+exp)}else{exp="window.scope."+attr,eval("result="+exp)}if(e){var max=e.getAttribute("maxlength");max&&result&&(result=result.substr(0,parseInt(max)))}return result||""},this._set_value=function(attr,value,e){var exp="window.scope."+attr;if(value=value.replace(/\n/gi,""),e){var max=e.getAttribute("maxlength");max&&value&&(value=value.substr(0,parseInt(max)))}eval(exp+"='"+value+"'")},this._add_event=function(a,b,c){var d=a[b];"function"!=typeof d?a[b]=function(){c(a)}:a[b]=function(){c(a),d.apply(this,arguments)}},this._invoke_expression=function(a,b){var c;if(a.indexOf("?")>=0){var d=a.split("?"),e=null,f=d[1].split(":")[0],g=d[1].split(":")[1];if(d[0].indexOf("==")>=0&&null==e){var h=d[0].split("==");e=this._get_value(h[0]).toString()==h[1]?f:g}if(d[0].indexOf("!=")>=0&&null==e){var h=d[0].split("!=");e=this._get_value(h[0]).toString()!=h[1]?f:g}if(d[0].indexOf(">=")>=0&&null==e){var h=d[0].split(">=");e=this._get_value(h[0]).toString()>=h[1]?f:g}if(d[0].indexOf("<=")>=0&&null==e){var h=d[0].split("<=");e=this._get_value(h[0]).toString()<=h[1]?f:g}if(d[0].indexOf(">")>=0&&null==e){var h=d[0].split(">");e=this._get_value(h[0]).toString()>h[1]?f:g}if(d[0].indexOf("<")>=0&&null==e){var h=d[0].split("<");e=this._get_value(h[0]).toString()<h[1]?f:g}c=e||""}else{c=this._get_value(a,b)}return c},this._invoke_value=function(a){for(var b=a,c=b.indexOf("{{");c>=0;){var d=b.indexOf("}}",c+2),e=b.substring(c+2,d),f=e.length+4,g=this._invoke_expression(e),h=b.substring(c,d+2);b=b.replace(h,g),c=b.indexOf("{{",d+2-(f-g.length))}return b},this._bind_double=function(){for(var a=this,b=0;b<document.all.length;b++){var c=document.all[b],d=c.getAttribute("am-bind");if(d){var e=this._get_value(d,c),f=c.toString();"[object HTMLInputElement]"==f?(c.value=e,this._add_event(c,"onchange",function(b){var c=b,d=c.getAttribute("am-bind"),e=c.value;a._set_value(d,e,c)})):"[object HTMLTextAreaElement]"==f?(c.innerHTML=e,this._add_event(c,"onchange",function(b){var c=b,d=c.getAttribute("am-bind"),e=c.value;a._set_value(d,e,c)})):"[object HTMLSelectElement]"==f?(c.value=e,this._add_event(c,"onchange",function(b){var c=b,d=c.getAttribute("am-bind"),e=c.value;a._set_value(d,e,c)})):c.innerHTML=e}}},this._bind_single=function(a){for(var b=a||document.body.childNodes,c=0;c<b.length;c++){var d=b[c].nodeValue,e=b[c].innerHTML,f=b[c].nodeName,g=b[c].attributes,h=b[c].childNodes;if("#comment"!=f&&"SCRIPT"!=f){if(d&&(b[c].nodeValue=this._invoke_value(d)),("OPTION"==f||"LI"==f)&&e&&(b[c].innerHTML=this._invoke_value(e)),g&&g.length>0){for(var i=0;i<g.length;i++){var j=g[i].nodeName||g[i].name,k=g[i].nodeValue;"am-single"==j?(b[c].value=this._invoke_expression(k,b[c]),b[c].innerHTML=this._invoke_expression(k,b[c])):k.indexOf("{{")>=0&&(g[i].nodeValue=this._invoke_value(k))}}h.length>0&&this._bind_single(h)}}},this._bind_repeat=function(){for(var a=0;a<document.all.length;a++){var b=document.all[a],c=b.getAttribute("am-repeat");if(c){var d=this._get_value(c,null,!0),e=this._get_value(c+"_TEMPLATE");e||(this._set_value(c+"_TEMPLATE",b.innerHTML),e=b.innerHTML);var f="",g="";if(d&&d.length>0){for(var h=0;h<d.length;h++){var i=d[h];g=e;for(var j=g.indexOf("{{"),k=-1;j>=0;){k=g.indexOf("}}",j);var l=g.substring(j+2,k),m=g.substring(j,k+2),n="";n="$v"==l?i:"$index"==l?h+1:i[l]?i[l]:"",n?(g=g.replace(m,n),j=g.indexOf("{{")):j=g.indexOf("{{",k)}f+=g}}b.innerHTML=f,b.style.display=""}}},this._Screen={ViewHeight:function(){var a=document,b="BackCompat"==a.compatMode?a.body:a.documentElement;return b.clientHeight},Height:function(){var a=document,b=a.body,c=a.documentElement,d="BackCompat"==a.compatMode?b:a.documentElement;return Math.max(c.scrollHeight,b.scrollHeight,d.clientHeight)},Top:function(a){var b=a.offsetTop;return null!=a.offsetParent&&(b+=this.Top(a.offsetParent)),b},ScrollBar:function(){var a;return window.pageYOffset?a=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a}},this._bind_src=function(){for(var a=this._Screen.ScrollBar(),b=this._Screen.ViewHeight()+a,c=(this._Screen.Height(),document.getElementsByTagName("img")),d=0;d<c.length;d++){var e=c[d].getAttribute("am-src");if(e){var f=this._Screen.Top(c[d]);b>f&&(c[d].setAttribute("src",e),c[d].setAttribute("am-src",""))}}},this._bind_hide=function(){for(var a=0;a<document.all.length;a++){var b=document.all[a],c=b.getAttribute("am-hide");if(c){var d=this._get_value(c);d.toString()||(b.style.display="none")}}};var o=this;return{get:function(a){return window.scope[a]},set:function(a,b){var c=setInterval(function(){document.body&&(window.scope[a]=b,o._bind_repeat(),o._bind_hide(),o._bind_single(),o._bind_double(),o._bind_src(),o._add_event(window,"onscroll",function(){o._bind_src()}),clearInterval(c))},50)}}}"function"==typeof define&&define.amd&&define(function(){return new angular_mobile});